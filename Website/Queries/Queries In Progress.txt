Search for a car to rent:
//assume $Username of current user is managed by application
//read $pickuptime, $returntime, $location
SELECT model_name, car_type, LocationName, color, hourly_rate, discounted_rate,
	daily_rate, seating_capacity, transmission_type, bluetooth_connectivity, auxillary_cable,
	available_till, ((SELECT hourlyrate from car where Car.VehicleSno NOT in Reservation)
		*($returntime - $pickuptime) - (Select discount from driving plan INNER JOIN gt_student_faculty_member ON gt_student_faculty_member.driving_plan_type = DrivingPlan.driving_plan_type) as estimatedcost,
from car
where $pickuptime, $returntime NOT in Reservation or Reservation.returntime < $pickuptime or
Reservation.pickupdatetime < $returntime and Car.LocationName = $location

// Find the available cars at the location specified
SELECT `CarModel`,`Type`,`CarLocation`,`Color`,
	`HourlyRate`,`DailyRate`,
	`Seating_Capacity`,`Transmission_Type`,`BluetoothConnectivity`,
	`Auxiliary Cable`
FROM car 
WHERE car.VehicleSno NOT IN 
	(SELECT car.VehicleSno FROM car INNER JOIN reservation ON car.VehicleSno=reservation.VehicleSno
	WHERE ('$UserPickUp' >= reservation.PickUpDateTime AND '$UserPickUp' <= reservation.ReturnDateTime)
		OR ('$UserPickUp' < reservation.PickUpDateTime AND '$UserReturn' > reservation.PickUpDateTime)
	)
	AND CarLocation='$Location' AND IFNULL(Type='$Type', TRUE) AND IFNULL(CarModel='$CarModel', TRUE);

SELECT IF(DATEDIFF(MIN(PickUpDateTime),'2013-01-01 03:00:00') < 12,MIN(PickUpDateTime),NULL) 
FROM car INNER JOIN reservation ON car.VehicleSno=reservation.VehicleSno
WHERE PickUpDateTime > '2013-01-01 03:00:00' AND CarLocation='Location0' AND IFNULL(Type=NULL, TRUE) AND IFNULL(CarModel=NULL, TRUE);

// Put this table below the one above
// Finds the cars not in the location specified
SELECT `CarModel`,`Type`,`CarLocation`,`Color`,
	`HourlyRate`,`DailyRate`,
	`Seating_Capacity`,`Transmission_Type`,`BluetoothConnectivity`,
	`Auxiliary Cable`  
FROM car
WHERE car.VehicleSno NOT IN 
	(SELECT car.VehicleSno FROM car INNER JOIN reservation ON car.VehicleSno=reservation.VehicleSno
	WHERE ('$UserPickUp' >= reservation.PickUpDateTime AND '$UserPickUp' <= reservation.ReturnDateTime)
		OR ('$UserPickUp' < reservation.PickUpDateTime AND '$UserReturn' >= reservation.PickUpDateTime)
	)
	AND CarLocation<>'$Location' AND IFNULL(Type='$Type', TRUE) AND IFNULL(CarModel='$CarModel', TRUE)
	ORDER BY CarLocation;

Rent a car:
INSERT INTO Reservation(pick_up_datetime, ReturnDateTime, Username, LateBy, ReturnStatus, EstimatedCost, LateFees, LocationName, VehicleSno)
VALUES ($pickuptime, $returntime, $Username, 0, “ON TIME”, [estimated cost],
	0, $location, $vehiclesno)

//we are assuming that when we make a reservation, the car is not late by any time yet.
//we are assuming that when a reservation is made, the reservation status is on time