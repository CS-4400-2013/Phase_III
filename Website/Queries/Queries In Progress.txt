Search for a car to rent:
//assume $Username of current user is managed by application
//read $pickuptime, $returntime, $location

// Find the available cars at the location specified
SELECT `CarModel`,`Type`,`CarLocation`,`Color`,
	`HourlyRate`,`DailyRate`,
	`Seating_Capacity`,`Transmission_Type`,`BluetoothConnectivity`,
	`Auxiliary Cable`
FROM car 
WHERE car.VehicleSno NOT IN 
	(SELECT car.VehicleSno FROM car INNER JOIN reservation ON car.VehicleSno=reservation.VehicleSno
	WHERE ('$UserPickUp' >= reservation.PickUpDateTime AND '$UserPickUp' <= reservation.ReturnDateTime)
		OR ('$UserPickUp' < reservation.PickUpDateTime AND '$UserReturn' > reservation.PickUpDateTime)
	)
	AND CarLocation='$Location' AND IFNULL(Type='$Type', TRUE) AND IFNULL(CarModel='$CarModel', TRUE);
	
SELECT IF(TIMESTAMPDIFF(hour,'$UserReturn',MIN(PickUpDateTime)) < 12,MIN(PickUpDateTime),NULL) 
FROM reservation INNER JOIN car ON car.VehicleSno=reservation.VehicleSno
WHERE PickUpDateTime > '$UserReturn';

// Put this table below the one above
// Finds the cars not in the location specified
SELECT `CarModel`,`Type`,`CarLocation`,`Color`,
	`HourlyRate`,`DailyRate`,
	`Seating_Capacity`,`Transmission_Type`,`BluetoothConnectivity`,
	`Auxiliary Cable`  
FROM car
WHERE car.VehicleSno NOT IN 
	(SELECT car.VehicleSno FROM car INNER JOIN reservation ON car.VehicleSno=reservation.VehicleSno
	WHERE ('$UserPickUp' >= reservation.PickUpDateTime AND '$UserPickUp' <= reservation.ReturnDateTime)
		OR ('$UserPickUp' < reservation.PickUpDateTime AND '$UserReturn' >= reservation.PickUpDateTime)
	)
	AND CarLocation<>'$Location' AND IFNULL(Type='$Type', TRUE) AND IFNULL(CarModel='$CarModel', TRUE)
	ORDER BY CarLocation;

Rent a car:
INSERT INTO Reservation(pick_up_datetime, ReturnDateTime, Username, LateBy, ReturnStatus, EstimatedCost, LateFees, LocationName, VehicleSno)
VALUES ($pickuptime, $returntime, $Username, 0, “ON TIME”, [estimated cost],
	0, $location, $vehiclesno)

//we are assuming that when we make a reservation, the car is not late by any time yet.
//we are assuming that when a reservation is made, the reservation status is on time